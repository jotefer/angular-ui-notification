/**
 * angular-ui-notification - Angular.js service providing simple notifications using Bootstrap 3 styles with css transitions for animating
 * @author Alex_Crack
 * @version v0.3.6
 * @link https://github.com/alexcrack/angular-ui-notification
 * @license MIT
 */
angular.module("ui-notification",[]),angular.module("ui-notification").provider("Notification",function(){this.options={delay:5e3,startTop:10,startRight:10,verticalSpacing:10,horizontalSpacing:10,positionX:"right",positionY:"top",replaceMessage:!1,templateUrl:"angular-ui-notification.html",onClose:void 0,onClick:void 0,closeOnClick:!0,maxCount:0,container:"body",priority:10,details:!0,id:""},this.setOptions=function(i){if(!angular.isObject(i))throw new Error("Options should be an object!");this.options=angular.extend({},this.options,i)},this.$get=["$timeout","$http","$compile","$templateCache","$rootScope","$injector","$sce","$q","$window",function(i,t,n,e,o,s,a,l,r){var c=this.options,p=c.startTop,d=c.startRight,u=c.verticalSpacing,f=c.horizontalSpacing,m=c.delay,g=[],h=!1,y=[],C=function(s,C){function k(t){function e(i){["-webkit-transition","-o-transition","transition"].forEach(function(t){k.css(t,i)})}var o=s.scope.$new();if(o.message=a.trustAsHtml(s.message),o.title=a.trustAsHtml(s.title),o.t=s.type.substr(0,1),o.delay=s.delay,o.onClose=s.onClose,o.onClick=s.onClick,o.details=s.details,o.uniqueNotification=s.unique||!1,o.uniqueNotification&&s.id){if(y.indexOf(s.id)>-1)return!1;y.push(s.id)}var l=function(i,t){return i._priority-t._priority},m=function(i,t){return t._priority-i._priority},C=function(){var i=0,t=0,n=p,e=d,o=[];"top"===s.positionY?g.sort(l):"bottom"===s.positionY&&g.sort(m);for(var a=g.length-1;a>=0;a--){var r=g[a];if(s.replaceMessage&&a<g.length-1)r.addClass("killed");else{var h=parseInt(r[0].offsetHeight),y=parseInt(r[0].offsetWidth),C=o[r._positionY+r._positionX];k+h>window.innerHeight&&(C=p,t++,i=0);var k=n=C?0===i?C:C+u:p,v=e+t*(f+y);r.css(r._positionY,k+"px"),"center"===r._positionX?r.css("left",parseInt(window.innerWidth/2-y/2)+"px"):r.css(r._positionX,v+"px"),o[r._positionY+r._positionX]=k+h,c.maxCount>0&&g.length>c.maxCount&&0===a&&r.scope().kill(!0),i++}}},k=n(t)(o);k._positionY=s.positionY,k._positionX=s.positionX,k._priority=s.priority,k.addClass(s.type),k.addClass(s.id);var _=function(i){i=i.originalEvent||i,("click"===i.type||"opacity"===i.propertyName&&i.elapsedTime>=1)&&(o.onClose&&o.$apply(o.onClose(k)),"click"===i.type&&o.onClick&&o.$apply(o.onClick(k)),k.remove(),g.splice(g.indexOf(k),1),o.$destroy(),C())};s.closeOnClick&&(k.addClass("clickable"),k.bind("click",_)),k.bind("webkitTransitionEnd oTransitionEnd otransitionend transitionend msTransitionEnd",_),angular.isNumber(s.delay)&&i(function(){k.addClass("killed")},s.delay),e("none"),angular.element(document.querySelector(s.container)).append(k);var w=-(parseInt(k[0].offsetHeight)+50);if(k.css(k._positionY,w+"px"),g.push(k),"center"==s.positionX){var b=parseInt(k[0].offsetWidth);k.css("left",parseInt(window.innerWidth/2-b/2)+"px")}i(function(){e("")}),o._templateElement=k,o.kill=function(t){t?(o.onClose&&o.$apply(o.onClose(o._templateElement)),g.splice(g.indexOf(o._templateElement),1),o._templateElement.remove(),o.$destroy(),i(C)):o._templateElement.addClass("killed")},o.toggleDetails=function(){o.details=!o.details,i(C,50)},i(C),h||(angular.element(r).bind("resize",function(t){i(C)}),h=!0),v.resolve(o)}var v=l.defer();"object"==typeof s&&null!==s||(s={message:s}),s.scope=s.scope?s.scope:o,s.template=s.templateUrl?s.templateUrl:c.templateUrl,s.delay=angular.isUndefined(s.delay)?m:s.delay,s.type=C||s.type||c.type||"",s.positionY=s.positionY?s.positionY:c.positionY,s.positionX=s.positionX?s.positionX:c.positionX,s.replaceMessage=s.replaceMessage?s.replaceMessage:c.replaceMessage,s.onClose=s.onClose?s.onClose:c.onClose,s.onClick=s.onClick?s.onClick:c.onClick,s.closeOnClick=null!==s.closeOnClick&&void 0!==s.closeOnClick?s.closeOnClick:c.closeOnClick,s.container=s.container?s.container:c.container,s.priority=s.priority?s.priority:c.priority,s.details=s.details||c.details,s.id=s.id||"";var _=e.get(s.template);return _?k(_):t.get(s.template,{cache:!0}).then(function(i){k(i.data)})["catch"](function(i){throw new Error("Template ("+s.template+") could not be loaded. "+i)}),v.promise};return C.primary=function(i){return this(i,"primary")},C.error=function(i){return this(i,"error")},C.success=function(i){return this(i,"success")},C.info=function(i){return this(i,"info")},C.warning=function(i){return this(i,"warning")},C.clearAll=function(){angular.forEach(g,function(i){i.addClass("killed")})},C.clearById=function(i){angular.forEach(g,function(t){t.hasClass(i)&&t.addClass("killed")})},C.clearAllUnique=function(){y=[]},C.clearUniqueById=function(i){var t=y.findIndex(function(t){return t===i});t>-1&&y.splice(t,1)},C}]}),angular.module("ui-notification").run(["$templateCache",function(i){i.put("angular-ui-notification.html",'<div class="ui-notification"><h3 ng-show="title" ng-bind-html="title"></h3><div class="message" ng-bind-html="message"></div></div>')}]);